(this["webpackJsonpticket-app"]=this["webpackJsonpticket-app"]||[]).push([[0],{294:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(26),r=n.n(s),a=n(298),i=n(305),j=n(309),o=n(310),l=n(311),b=n(64),u=n(24),d=n(36),O=n(5),h=Object(c.createContext)(),x=function(e){var t=e.children,n=Object(c.useState)(!1),s=Object(d.a)(n,2),r=s[0],a=s[1];return Object(O.jsx)(h.Provider,{value:{hideMenu:r,_handleShowMenu:function(){return a(!1)},_handleHideMenu:function(){return a(!0)}},children:t})},p=n(302),m=n(79),f=n(43),g=n(300),k=n(299),v=n(306),y=n(297),S=n(166),C=n.n(S),I=Object(c.createContext)(),T=function(e){var t=e.children,n=function(e){var t=Object(c.useMemo)((function(){return C.a.connect(e,{transports:["websocket"]})}),[e]),n=Object(c.useState)(!1),s=Object(d.a)(n,2),r=s[0],a=s[1];return Object(c.useEffect)((function(){a(t.connected)}),[t]),Object(c.useEffect)((function(){t.on("connect",(function(){return a(!0)}))}),[t]),Object(c.useEffect)((function(){t.on("disconnect",(function(){return a(!1)}))}),[t]),{socket:t,online:r}}("https://developaul-ticketapp.herokuapp.com"),s=n.socket,r=n.online;return Object(O.jsx)(I.Provider,{value:{socket:s,online:r},children:t})},E=function(e){var t=Object(c.useContext)(h),n=t._handleShowMenu,s=t._handleHideMenu;Object(c.useEffect)((function(){e?s():n()}),[s,n,e])},w=n(133),F=n.n(w),M=n(167),N=function(){var e=Object(M.a)(F.a.mark((function e(){var t,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://developaul-ticketapp.herokuapp.com","/lastThirteen"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.lastThirteen);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=p.a.Title,H=p.a.Text,P=function(){E(!0);var e=Object(c.useContext)(I).socket,t=Object(c.useState)([]),n=Object(d.a)(t,2),s=n[0],r=n[1];return Object(c.useEffect)((function(){return e.on("assigned-ticket",(function(e){return r(e)})),function(){return e.off("assigned-ticket")}}),[e]),Object(c.useEffect)((function(){N().then(r)}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(q,{level:1,children:"Atendiendo al cliente"}),Object(O.jsxs)(m.a,{children:[Object(O.jsx)(f.a,{span:12,children:Object(O.jsx)(g.b,{dataSource:s.slice(0,3),renderItem:function(e){return Object(O.jsx)(g.b.Item,{children:Object(O.jsx)(k.a,{style:{width:300,marginTop:16},actions:[Object(O.jsx)(v.a,{color:"volcano",children:e.agent}),Object(O.jsxs)(v.a,{color:"magenta",children:["Escritorio: ",e.desktop]})],children:Object(O.jsxs)(q,{children:["N\xb0 ",e.number]})})})}})}),Object(O.jsxs)(f.a,{span:12,children:[Object(O.jsx)(y.a,{children:" Historial "}),Object(O.jsx)(g.b,{dataSource:s.slice(3),renderItem:function(e){return Object(O.jsx)(g.b.Item,{children:Object(O.jsx)(g.b.Item.Meta,{title:"Ticket N\xb0 ".concat(e.number),description:Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(H,{type:"secondary",children:"En el escritorio "}),Object(O.jsxs)(v.a,{color:"magenta",children:[" ",e.number," "]}),Object(O.jsx)(H,{type:"secondary",children:" Agente: "}),Object(O.jsxs)(v.a,{color:"volcano",children:[" ",e.agent," "]})]})})})}})]})]})]})},_=n(307),z=n(301),A=n(304),J=n(303),B=n(180),K=function(){return{agent:localStorage.getItem("agent"),desktop:localStorage.getItem("desktop")}},U=p.a.Title,V=p.a.Text,W=function(){E(!1);var e=Object(c.useState)(K()),t=Object(d.a)(e,1)[0],n=Object(u.g)(),s=Object(c.useCallback)((function(e){var t=e.agent,c=e.desktop;localStorage.setItem("agent",t),localStorage.setItem("desktop",c),n.push("/desktop")}),[n]),r=Object(c.useCallback)((function(e){console.log("Failed:",e)}),[]);return(null===t||void 0===t?void 0:t.agent)&&(null===t||void 0===t?void 0:t.desktop)?Object(O.jsx)(u.a,{to:"/desktop"}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(U,{level:2,children:"Ingresar"}),Object(O.jsx)(V,{children:"Ingrese su nombre y n\xfamero de escritorio"}),Object(O.jsx)(y.a,{}),Object(O.jsxs)(z.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:14},initialValues:{remember:!0},onFinish:s,onFinishFailed:r,children:[Object(O.jsx)(z.a.Item,{label:"Nombre del agente",name:"agent",rules:[{required:!0,message:"Por favor ingrese su nombre"}],children:Object(O.jsx)(A.a,{})}),Object(O.jsx)(z.a.Item,{label:"Escritorio",name:"desktop",rules:[{required:!0,message:"Ingrese el n\xfamero de escritorio"}],children:Object(O.jsx)(J.a,{min:1,max:99})}),Object(O.jsx)(z.a.Item,{wrapperCol:{offset:8,span:14},children:Object(O.jsxs)(B.a,{type:"primary",htmlType:"submit",shape:"round",children:[Object(O.jsx)(_.a,{}),"Ingresar"]})})]})]})},D=n(182),G=n(91),L=p.a.Title,Q=p.a.Text,R=function(){E(!0);var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],s=t[1],r=Object(c.useContext)(I).socket,a=Object(c.useState)(K()),i=Object(d.a)(a,1)[0],j=Object(u.g)(),o=Object(c.useCallback)((function(){localStorage.clear(),j.replace("/signin")}),[j]),l=Object(c.useCallback)((function(){r.emit("assign-ticket",i,(function(e){return s(e)}))}),[r,i]);return(null===i||void 0===i?void 0:i.agent)&&(null===i||void 0===i?void 0:i.desktop)?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(m.a,{children:[Object(O.jsxs)(f.a,{span:20,children:[Object(O.jsx)(L,{level:2,children:i.agent}),Object(O.jsx)(Q,{children:"Usted esta trabajando en el escritorio: "}),Object(O.jsx)(Q,{type:"success",children:i.desktop})]}),Object(O.jsx)(f.a,{span:4,align:"right",children:Object(O.jsx)(B.a,{shape:"round",type:"danger",onClick:o,icon:Object(O.jsx)(D.a,{}),children:"Salir"})})]}),Object(O.jsx)(y.a,{}),n&&Object(O.jsx)(m.a,{children:Object(O.jsxs)(f.a,{children:[Object(O.jsx)(Q,{children:"Est\xe1 atendiendo el ticket n\xfamero: "}),Object(O.jsx)(Q,{style:{fontSize:30},type:"danger",children:n.number})]})}),Object(O.jsx)(m.a,{children:Object(O.jsx)(f.a,{offset:18,span:6,align:"right",children:Object(O.jsx)(B.a,{onClick:l,shape:"round",type:"primary",icon:Object(O.jsx)(G.a,{}),children:"Siguiente"})})})]}):Object(O.jsx)(u.a,{to:"/signin"})},X=n(308),Y=p.a.Title,Z=p.a.Text,$=function(){E(!0);var e=Object(c.useContext)(I).socket,t=Object(c.useState)(null),n=Object(d.a)(t,2),s=n[0],r=n[1],a=Object(c.useCallback)((function(){return e.emit("generate-ticket",null,(function(e){r(e)}))}),[e]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(m.a,{children:Object(O.jsxs)(f.a,{span:14,offset:6,align:"center",children:[Object(O.jsx)(Y,{level:3,children:"Presione el bot\xf3n para un nuevo ticket"}),Object(O.jsx)(B.a,{type:"primary",shape:"round",icon:Object(O.jsx)(X.a,{}),size:"large",onClick:a,children:"Nuevo Ticket"})]})}),s&&Object(O.jsx)(m.a,{style:{marginTop:100},children:Object(O.jsxs)(f.a,{span:14,offset:6,align:"center",children:[Object(O.jsx)(Z,{level:2,children:"Su n\xfamero"}),Object(O.jsx)("br",{}),Object(O.jsx)(Z,{type:"success",style:{fontSize:55},children:s.number})]})})]})},ee=a.a.Sider,te=a.a.Content,ne=function(){var e=Object(c.useContext)(h).hideMenu;return Object(O.jsx)(b.a,{children:Object(O.jsxs)(a.a,{style:{height:"100vh"},children:[Object(O.jsxs)(ee,{hidden:e,collapsedWidth:"0",breakpoint:"md",children:[Object(O.jsx)("div",{className:"logo"}),Object(O.jsxs)(i.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(O.jsx)(i.a.Item,{icon:Object(O.jsx)(j.a,{}),children:Object(O.jsx)(b.b,{to:"/signin",children:"Ingresar"})},"1"),Object(O.jsx)(i.a.Item,{icon:Object(O.jsx)(o.a,{}),children:Object(O.jsx)(b.b,{to:"queue",children:"Cola"})},"2"),Object(O.jsx)(i.a.Item,{icon:Object(O.jsx)(l.a,{}),children:Object(O.jsx)(b.b,{to:"create",children:"Crear ticket"})},"3")]})]}),Object(O.jsx)(a.a,{className:"site-layout",children:Object(O.jsx)(te,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:280},children:Object(O.jsxs)(u.d,{children:[Object(O.jsx)(u.b,{path:"/signin",component:W}),Object(O.jsx)(u.b,{path:"/queue",component:P}),Object(O.jsx)(u.b,{path:"/create",component:$}),Object(O.jsx)(u.b,{path:"/desktop",component:R}),Object(O.jsx)(u.a,{to:"/signin"})]})})})]})})},ce=function(){return Object(O.jsx)(T,{children:Object(O.jsx)(x,{children:Object(O.jsx)(ne,{})})})};n(294);r.a.render(Object(O.jsx)(ce,{}),document.getElementById("root"))}},[[295,1,2]]]);
//# sourceMappingURL=main.dd8a7530.chunk.js.map